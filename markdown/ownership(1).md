# Rust - 소유권(Ownership) 1

> 러스트가 메모리를 관리하는 방법

소유권(ownership)이라는 시스템을 만들고, 컴파일러가 컴파일 중에 검사할 여러 규칙을 정해 메모리를 관리하는 방식. 이 규칙 중 하나라도 위반하면 컴파일 되지 않는다

> 컴파일타임에 메모리 안전성을 확보할 수 있다

## 스택영역과 힙 영역

### 스택영역
- 값이 들어온 순서대로 저장하고, 역순으로 제거(후입선출)
- 스택에 저장되는 데이터는 모두 명확하고 크기가 정해져있음.
- 컴파일 타임에 크기를 알 수 없거나, 크기가 변경될 수 있는 데이터는 힙에 저장되어야 함
- 메모리 할당자가 새로운 데이터를 저장할 공간을 찾을 필요가 없이 항상 스택 가장 위에 데이터를 저장 -> 빠르다

### 힙 영역
- 데이터를 힙에 넣을때는 먼저 저장할 공간이 있는지 운영체제에 물어봄. 그러면 메모리 할당자가 힙 영역의 빈 지점을 찾고, 그 지점을 가리키는 포인터를 반환
- 포인터가 가리키는 데이터를 사용할때는, 포인터를 참조해 해당 포인터가 가리키는 위치로 이동하는 과정이 필요
- 포인터가 가리키는 곳을 찾는 과정때문에 느려짐


힙의 어떤 데이터를 사용하는지 추적하고, 힙에서 중복되는 데이터를 최소화하고, 쓰지 않는 데이터를 힙에서 정리해 확보하는 등의 작업은 모두 소유권과 관련되어 있다.


### 참고 자료
[러스트 프로그래밍 공식 가이드 - 소유권이 뭔가요?](https://doc.rust-kr.org/ch04-01-what-is-ownership.html)
